{% extends 'base.html' %}
{% block title %}Edit Skill - SkillLink{% endblock %}

{% block content %}
<div class="container py-5 d-flex justify-content-center align-items-center">
  <div class="card edit-skill-card shadow-lg w-100 animate__animated animate__fadeIn" style="max-width: 600px;">
    <div class="card-body">
      <!-- Header -->
      <h2 class="card-title text-center mb-4 fw-bold text-dark dark-mode-text">Edit Skill</h2>

      <!-- Form -->
      <form method="post">
        {% csrf_token %}

        <!-- Skill Name -->
        <div class="mb-3">
          <label for="skill_name" class="form-label fw-semibold">Skill Name</label>
          <input type="text" class="form-control" id="skill_name" name="skill_name"
                 value="{{ skill_instance.skill.name }}" placeholder="Enter skill name" required>
        </div>

        <!-- Experience Level -->
        <div class="mb-3">
          <label for="experience_level" class="form-label fw-semibold">Experience Level</label>
          <select class="form-select" id="experience_level" name="experience_level" required>
            <option value="beginner" {% if skill_instance.experience_level == 'beginner' %}selected{% endif %}>Beginner</option>
            <option value="intermediate" {% if skill_instance.experience_level == 'intermediate' %}selected{% endif %}>Intermediate</option>
            <option value="advanced" {% if skill_instance.experience_level == 'advanced' %}selected{% endif %}>Advanced</option>
          </select>
        </div>

        <!-- Personal Description -->
        <div class="mb-3">
          <label for="personal_description" class="form-label fw-semibold">Personal Description</label>
          <textarea class="form-control" id="personal_description" name="personal_description" rows="3" placeholder="Describe your experience">{{ skill_instance.personal_description }}</textarea>
        </div>

        <!-- Available for Teaching -->
        <div class="form-check mb-3">
          <input type="checkbox" class="form-check-input" id="available_for_teaching" name="available_for_teaching"
                 {% if skill_instance.available_for_teaching %}checked{% endif %}>
          <label class="form-check-label fw-semibold" for="available_for_teaching">Available for Teaching</label>
        </div>

        <!-- Learning Status -->
        <div class="mb-3">
          <label for="learning_status" class="form-label fw-semibold">Learning Status</label>
          <select class="form-select" id="learning_status" name="learning_status" required>
            <option value="learning" {% if skill_instance.learning_status == 'learning' %}selected{% endif %}>Learning</option>
            <option value="mastered" {% if skill_instance.learning_status == 'mastered' %}selected{% endif %}>Mastered</option>
            <option value="teaching" {% if skill_instance.learning_status == 'teaching' %}selected{% endif %}>Teaching</option>
          </select>
        </div>

        <!-- Token Cost -->
        <div class="mb-3">
          <label for="token_cost" class="form-label fw-semibold">Token Cost</label>
          <input type="number" class="form-control" id="token_cost" name="token_cost"
                 value="{{ skill_instance.token_cost }}" placeholder="Enter token cost">
        </div>

        <!-- Read-only Stats -->
        <div class="mb-3">
          <label class="form-label fw-semibold">Times Taught</label>
          <input type="number" class="form-control bg-light" value="{{ skill_instance.times_taught }}" readonly>
        </div>

        <div class="mb-4">
          <label class="form-label fw-semibold">Average Rating</label>
          <input type="number" class="form-control bg-light" value="{{ skill_instance.average_rating }}" readonly>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
          <button type="submit" class="btn btn-warning fw-bold px-4 py-2 shadow-sm hover-scale">Update Skill</button>
        </div>
      </form>

      <!-- Back Link -->
      <div class="text-center mt-3">
        <a href="{% url 'profile_edit' %}" class="text-decoration-none text-dark fw-semibold hover-underline">
          &larr; Back to Profile
        </a>
      </div>
    </div>
  </div>
</div>

<style>
/* Card Style */
.edit-skill-card {
  background: #fffbe6;
  border: 2px solid #ffd700;
  border-radius: 20px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.edit-skill-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

/* Inputs & selects */
.form-control, .form-select {
  border: 2px solid #ffda44;
  border-radius: 10px;
  transition: all 0.3s ease;
}
.form-control:focus, .form-select:focus {
  border-color: #e6b800;
  box-shadow: 0 0 0 0.2rem rgba(230,184,0,0.25);
}

/* Hover effects */
.hover-scale:hover {
  transform: scale(1.05);
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}
.hover-underline:hover {
  text-decoration: underline;
}

/* Responsive Layout */
@media (max-width: 768px) {
  .edit-skill-card {
    margin: 20px;
  }
}

/* ========================= */
/* ðŸ”¥ DARK MODE SUPPORT ðŸ”¥ */
/* ========================= */
.dark-mode .edit-skill-card {
  background: #1e1e1e;
  border-color: #444;
  color: #f5f5f5;
}
.dark-mode .form-control,
.dark-mode .form-select {
  background: #2b2b2b;
  color: #f5f5f5;
  border-color: #555;
}
.dark-mode .form-control:focus,
.dark-mode .form-select:focus {
  border-color: #ffcf33;
  box-shadow: 0 0 0 0.2rem rgba(255,207,51,0.25);
}
.dark-mode .text-dark {
  color: #f5f5f5 !important;
}
.dark-mode a.text-dark {
  color: #ffcf33 !important;
}
</style>
{% endblock %}
