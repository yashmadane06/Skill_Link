{% extends 'base.html' %}
{% load static %}

{% block title %}Register - SkillLink{% endblock %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center vh-100">
  <div class="card shadow-lg border-0 register-card animate__animated animate__fadeInUp"
       style="max-width: 420px; width: 100%; border-radius: 18px; background: var(--card-bg); border: 2px solid var(--accent-color);">
    <div class="card-body p-4">

      <!-- Header -->
      <h3 class="text-center fw-bold mb-4 mode-text animate__animated animate__fadeInDown">
        Create Account
      </h3>

      <!-- Messages -->
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      {% endif %}

      <!-- Registration Form -->
      <form method="POST" class="animate__animated animate__fadeIn">
        {% csrf_token %}

        <div class="mb-3">
          <label class="form-label fw-semibold mode-text">Username</label>
          <input type="text" class="form-control shadow-sm" name="username" placeholder="Enter username" required>
        </div>

        <div class="mb-3">
          <label class="form-label fw-semibold mode-text">Email</label>
          <input type="email" class="form-control shadow-sm" name="email" placeholder="Enter email" required>
        </div>

        <div class="mb-3 position-relative">
          <label class="form-label fw-semibold mode-text">Password</label>
          <div class="input-group">
            <input type="password" class="form-control shadow-sm" id="password1" name="password1" placeholder="Enter password" required>
            <button type="button" class="btn btn-outline-secondary password-toggle" onclick="togglePassword('password1', this)">
              <i class="bi bi-eye"></i>
            </button>
          </div>
        </div>

        <div class="mb-3 position-relative">
          <label class="form-label fw-semibold mode-text">Confirm Password</label>
          <div class="input-group">
            <input type="password" class="form-control shadow-sm" id="password2" name="password2" placeholder="Confirm password" required>
            <button type="button" class="btn btn-outline-secondary password-toggle" onclick="togglePassword('password2', this)">
              <i class="bi bi-eye"></i>
            </button>
          </div>
        </div>

        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-warning text-dark fw-bold shadow-sm hover-grow">
            Register
          </button>
        </div>
      </form>

      <p class="text-center mt-3 mode-text">
        Already have an account?
        <a href="{% url 'login' %}" class="text-decoration-none fw-semibold accent-link">Login</a>
      </p>
    </div>
  </div>
</div>

<!-- Styles -->
<style>
/* Font is inherited from base.html */

/* Theme variables (synced with dark mode toggle) */
:root {
  --card-bg: linear-gradient(135deg, #fff8dc, #fdf5e6);
  --accent-color: #f1c40f;
  --text-color: #1a1a1a;
}
.dark-mode {
  --card-bg: linear-gradient(135deg, #1f1f1f, #2b2b2b);
  --accent-color: #ffd700;
  --text-color: #f8f9fa;
}

/* Card hover */
.register-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
}
.register-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

/* Inputs */
input {
  border-radius: 10px !important;
  border: 1px solid #ddd !important;
  padding: 10px !important;
  transition: all 0.3s ease;
}
input:focus {
  border-color: var(--accent-color) !important;
  box-shadow: 0 0 8px rgba(241, 196, 15, 0.6) !important;
}

/* Password toggle button */
.password-toggle i {
  transition: color 0.3s ease;
}
.password-toggle:hover i {
  color: var(--accent-color);
}

/* Hover grow */
.hover-grow {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.hover-grow:hover {
  transform: scale(1.05);
  box-shadow: 0 8px 18px rgba(0,0,0,0.25);
}

/* Mode text color */
.mode-text { color: var(--text-color) !important; }
.accent-link { color: var(--accent-color) !important; }
.accent-link:hover { text-decoration: underline; }
</style>

<!-- Animate.css -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<!-- Toggle Password Script -->
<script>
function togglePassword(id, btn) {
  const input = document.getElementById(id);
  const icon = btn.querySelector("i");
  const isPassword = input.type === "password";
  input.type = isPassword ? "text" : "password";
  icon.classList.toggle("bi-eye");
  icon.classList.toggle("bi-eye-slash");
}
</script>
{% endblock %}
